# -paddle-
介绍如何运行已经训练好的模型以及解决一些可能会遇到的问题
1.数据处理，将voc标注格式转为coco标注格式，即使用data_dr来将xml文件修改为json文件，并且划分适当的训练集和验证集。
2.根据https://github.com/PaddlePaddle/PaddleOCR/blob/release/2.6/ppstructure/layout/README_ch.md来安装配置本地环境。
3.打开picodet_lcnet_x1_0_layout.yml文件进行编辑，该文件一般在C:\Users\86131\PaddleDetection\configs\picodet\legacy_model\application\layout_analysis下，将其中的pretrain_weights修改为C:\Users\86131\PaddleDetection\configs\pretrain_weights\models\picodet_lcnet_x1_0_fgd_layout.pdparams，也可自己创建文件夹，picodet_lcnet_x1_0_fgd_layout.pdparams为预训练模型，可以在https://github.com/PaddlePaddle/PaddleOCR/blob/release/2.6/ppstructure/docs/models_list.md中下载。weights修改为output/picodet_lcnet_x1_0_layout/model_final。epoch自己决定。修改num_classes，由数据集来决定。修改TrainDataset，dataset_dir为数据根目录，anno_path为json文件名称，image_dir修改为训练集图片名称，同理修改EvalDataset。TestDataset中anno_path修改为EvalDataset的根目录，并且加上具体的验证集json文件，例如：C:\deep_learning\xml\Annotations\val_coco\val.json。若训练时出现显存不足的问题，修改TrainReader中的batch_size，根据比例缩小，并且等比例缩小修改另一个配置文件中的base_lr，该文件一般为C:\Users\86131\PaddleDetection\configs\picodet\legacy_model\_base_\optimizer_100e.yml。
准备完毕后进入PaddleDetection环境，用python tools/train.py -c configs/picodet/legacy_model/application/layout_analysis/picodet_lcnet_x1_0_layout.yml  --eval开启训练。
训练完毕后可以在C:\Users\86131\PaddleDetection\output\picodet_lcnet_x1_0_layout文件夹下看到训练好的模型，然后用命令python tools/infer.py -c configs/picodet/legacy_model/application/layout_analysis/picodet_lcnet_x1_0_layout.yml -o weights='output/picodet_lcnet_x1_0_layout/best_model.pdparams' --infer_img=docs/images/layout.jpg --output_dir=output_dir/ --draw_threshold=0.5来开启预测，结果会保存在C:\Users\86131\PaddleDetection\output_dir中
